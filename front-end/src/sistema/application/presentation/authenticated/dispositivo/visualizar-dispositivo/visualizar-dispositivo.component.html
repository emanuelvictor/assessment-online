<div layout-align='center center' layout-gt-xs='row' layout-margin>
  <div flex-gt-xs='80' layout='row' layout-margin>
    <div flex layout='column' layout-align='center center' layout-margin>
      <mat-card [@fadeInOut] class='bgc-grey-50' layout-margin
                style='width: calc(100% - 15px)' *ngIf='dispositivo?.id'>
        <mat-card-content>

          <div layout='row'>
            <div layout='column' style='min-width: 17px'>
              <button *ngIf='activatedRoute?.snapshot?.params?.id'
                      routerLink='../' type='button' color='primary'
                      class='mat-headline tc-grey-500' mat-icon-button>
                <mat-icon>arrow_back</mat-icon>
              </button>
            </div>

            <div flex-gt-xs='100' layout='column' [@fadeInOut]
                 layout-align='start center' layout-gt-xs='row'>

              <div *ngIf='path' [@fadeInOut] flex
                   layout-align='center center' layout='column'
                   class='push-top push-left push-right push-bottom'>
                <img src='{{path}}'
                     [matTooltipPosition]="'below'"
                     style='max-width: 200px; cursor:pointer'
                     (click)='updateCodigo(dispositivoToCode?.id)'
                     matTooltip='Clique para gerar um novo código'>
                <h2 layout-align='center center'
                    style='margin-top: 10px' flex
                    class='mat-subheading-2 tc-blue-grey-500 no-margin'>
                  Código: {{dispositivoToCode?.codigo}}

                </h2>
              </div>

              <div flex flex-gt-xs='80'
                   layout-margin style='margin-top: 0'
                   layout='row' layout-align='start center'>

                <div flex layout='column'>
                  <div layout='row' layout-align='start center'>
                    <div layout='column'>

                      <h1 class='mat-headline tc-blue-grey-800 no-margin' flex='100'>
                        {{dispositivo?.nome}}
                        <span (click)='desvincular(dispositivoToCode?.numeroSerie)'
                              class='mat-subheading-2 tc-dark-blue-grey-B65 no-margin'
                              *ngIf='dispositivoToCode?.numeroSerie' style='cursor: pointer'
                              [matTooltipPosition]="'below'" matTooltip='Clique para desvincular'>
                        Número de série vinculado: {{dispositivoToCode?.numeroSerie}}
                          <a style='padding-left: 0'>
                          (Desvincular)
                        </a>
                      </span>
                      </h1>
                      <h2 *ngIf='dispositivo?.senha' class='mat-subheading-2 tc-blue-grey-500 no-margin' flex>
                        Senha para sair do aplicativo: {{dispositivo?.senha}}
                      </h2>
                      <h2 class='mat-subheading-2 tc-blue-grey-500 no-margin' flex>
                        Quebrar linha durante a seleção de itens
                        avaliáveis: {{dispositivo?.quebrarLinhaNaSelecaoDeItemAvaliavel ? 'Sim' : 'Não'}}
                      </h2>
                      <h2 class='mat-subheading-2 tc-blue-grey-500 no-margin' flex>
                        Tempo de espera entre as avaliações (Em segundos): {{dispositivo?.time}}
                      </h2>

                      <opcoes-site [dispositivo]='dispositivo' *ngIf='dispositivo?.id'></opcoes-site>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <span flex></span>

            <!--div opções-->
            <div flex='10' layout='row'>
              <!--options-->
              <div flex layout='column' layout-align='start end'>
                <div layout='row'>
                  <button class='tc-blue-grey-900' mat-icon-button routerLink='alterar'>
                    <mat-icon>mode_edit</mat-icon>
                  </button>
                  <button [matMenuTriggerFor]='menu' class='tc-blue-grey-900' mat-icon-button>
                    <mat-icon>more_vert</mat-icon>
                  </button>
                  <mat-menu #menu='matMenu'>
                    <!--                    <button (click)='remove()' color='primary' mat-menu-item>-->
                    <!--                      <mat-icon>delete</mat-icon>-->
                    <!--                      <span>Remover</span>-->
                    <!--                    </button>-->
                    <button (click)='updateStatusAtivo(dispositivo?.id)' color='primary' mat-menu-item>
                      <mat-icon>{{dispositivo?.ativo ? 'block' : 'replay'}} </mat-icon>
                      <span>{{dispositivo?.ativo ? 'Desativar' : 'Reativar'}}</span>
                    </button>
                  </mat-menu>
                </div>
              </div>
            </div>

          </div>

        </mat-card-content>
      </mat-card>

      <div style='width: 100%' [@fadeInOut]
           layout-align='center center' layout='row'
           *ngIf='vincularUnidadeTipoSvaliacao' flex>

        <mat-form-field flex style='margin-bottom: 0'>
          <input [(ngModel)]='filter.unidade.nome'
                 [ngModelOptions]='{standalone: true}'
                 placeholder='Filtre as unidades por nome'
                 id='filter' matInput maxlength='200' name='filter'>
        </mat-form-field>
      </div>

      <mat-card *ngIf='vincularUnidadeTipoSvaliacao' class='bgc-grey-50' style='width: 100%'>

        <vincular-unidade-tipo-avaliacao *ngIf='dispositivo?.id' [(unidades)]='unidades' [filter]='filter'
                                         [(unidadesTiposAvaliacoesDispositivo)]='dispositivo.unidadesTiposAvaliacoesDispositivo'
                                         (unidadesTiposAvaliacoesDispositivoChange)='unidadesTiposAvaliacoesDispositivoChange($event)'>
        </vincular-unidade-tipo-avaliacao>

      </mat-card>

    </div>
  </div>
</div>
