<search-bar>
  <div class='push-right'
       layout='column'
       style='min-width: 17px'>
    <button class='mat-headline tc-grey-500' color='primary'
            mat-icon-button routerLink='../'
            type='button'>
      <mat-icon>arrow_back</mat-icon>
    </button>
  </div>

  <div class='tc-grey-600 push-left' layout='row'
       style='margin-top: 3px'>
    {{ rankeavel?.nome }}
  </div>

  <div layout='row' layout-margin
       style='margin-left: 41px; margin-top: 15px'>

    <ev-datepicker flex layout='row' style='margin-left: -2px'
                   [(dataInput)]='pageRequest.dataInicioFilter'
                   #dataInicio (dataInputChange)='listByDates()'>
      <mat-form-field style='width: 225px'>
        <input placeholder='Data da avaliação - Início'
               [(ngModel)]='pageRequest.dataInicioFilter'
               id='dataInicio' matInput name='dataInicio'
               [textMask]='{mask: masks.date, guide: false}'>
      </mat-form-field>
    </ev-datepicker>

    <ev-datepicker flex layout='row'
                   [(dataInput)]='pageRequest.dataTerminoFilter'
                   #dataTermino (dataInputChange)='listByDates()'>
      <mat-form-field style='width: 235px'>
        <input placeholder='Data da avaliação - Término'
               [(ngModel)]='pageRequest.dataTerminoFilter'
               id='dataTermino' matInput name='dataTermino'
               [textMask]='{mask: masks.date, guide: false}'>
      </mat-form-field>
    </ev-datepicker>

  </div>

  <div flex-gt-md></div>
  <div class='tc-grey-600 push-left' layout='row'
       style='margin-top: 3px'>
    Média: {{rankeavel?.media > 0 ? (rankeavel?.media | number:'1.0-2' :'pt-BR').replace(',', '.') : 0}}
  </div>
  <mat-slide-toggle layout-margin [(ngModel)]='pizza'
                    *ngIf='(rankeavel?.avaliacoes1+rankeavel?.avaliacoes2+rankeavel?.avaliacoes3+rankeavel?.avaliacoes4+rankeavel?.avaliacoes5) != 0'>
    <span class='tc-grey-600'>{{pizza ? 'Pizza' : 'Em barras' }}</span>
  </mat-slide-toggle>

  <button mat-raised-button
          (click)='pageRequest.dataInicioFilter = null; pageRequest.dataTerminoFilter = null; resetDates(); listByDates()'>
    Limpar filtros
  </button>

</search-bar>

<div layout-gt-xs='row'>
  <div flex-gt-xs='100'>
    <div layout='row' layout-align='center start'>
      <div flex='90' layout='column'>

        <div class='tc-grey-500 size-height-50'
             layout='row' layout-align='start center'>
          <div flex></div>
          <span> {{(rankeavel?.avaliacoes1 + rankeavel?.avaliacoes2 + rankeavel?.avaliacoes3 + rankeavel?.avaliacoes4 + rankeavel?.avaliacoes5) === 0 ? '' : (rankeavel?.avaliacoes1 + rankeavel?.avaliacoes2 + rankeavel?.avaliacoes3 + rankeavel?.avaliacoes4 + rankeavel?.avaliacoes5) + ' avaliações'}} </span>
        </div>

        <mat-card>
          <div
              *ngIf="(rankeavel?.avaliacoes1+rankeavel?.avaliacoes2+rankeavel?.avaliacoes3+rankeavel?.avaliacoes4+rankeavel?.avaliacoes5) != 0">

            <div *ngIf='!pizza' style='height:500px;'>
              <ngx-charts-bar-vertical (select)="onSelect($event)"
                                       [results]="single"
                                       [scheme]="{ domain: [ '#c21c1f', '#e96d01', '#d4c40d', '#8fc82c', '#5ee924' ]}"
                                       [showXAxisLabel]="true"
                                       [showYAxisLabel]="true"
                                       [xAxisLabel]="'Avaliações'"
                                       [xAxis]="true"
                                       [yAxis]="true">
              </ngx-charts-bar-vertical>
            </div>

            <ngx-charts-advanced-pie-chart
                *ngIf='pizza' [results]="single"
                [scheme]="{ domain: [ '#c21c1f', '#e96d01', '#d4c40d', '#8fc82c', '#5ee924' ]}">
            </ngx-charts-advanced-pie-chart>
          </div>
        </mat-card>

        <div
            *ngIf='(rankeavel?.avaliacoes1+rankeavel?.avaliacoes2+rankeavel?.avaliacoes3+rankeavel?.avaliacoes4+rankeavel?.avaliacoes5) === 0'
            class='tc-grey-500 size-height-50' layout='row'
            layout-align='center center'>
          <span> Sem estatísticas por aqui =( </span>
        </div>

      </div>
    </div>
  </div>
</div>
