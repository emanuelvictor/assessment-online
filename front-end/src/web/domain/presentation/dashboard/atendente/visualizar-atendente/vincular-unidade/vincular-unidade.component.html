<mat-nav-list *ngIf='unidades?.length'>
    <div *ngFor="let unidade of unidades | filter:filter.unidade">
        <mat-list-item disableRipple layout='row' layout-margin>

            <h3 matLine>{{unidade?.nome}}</h3>
            <p matLine>
                {{unidade?.endereco?.logradouro ? unidade?.endereco?.logradouro + ', ' : ''}}
                {{unidade?.endereco?.numero ? unidade?.endereco?.numero + ', ' : ''}}
                {{unidade?.endereco?.bairro ? unidade?.endereco?.bairro + ', ' : ''}}
                {{unidade?.endereco?.cidade ? (unidade?.endereco?.cidade?.nome + ' - ' + unidade?.endereco?.cidade?.estado?.uf) : ''}}
            </p>

            <mat-slide-toggle layout-margin flex
                              [(ngModel)]='unidade.operadorValue'
                              (ngModelChange)='saveOperadorInner(unidade)'>
                Operador
            </mat-slide-toggle>
            <mat-slide-toggle layout-margin flex
                              [(ngModel)]='unidade.avaliavelValue'>
                Avali√°vel
            </mat-slide-toggle>

        </mat-list-item>

        <mat-accordion>
            <mat-expansion-panel [expanded]='unidade.avaliavelValue'
                                 (opened)='changeAvaliavel(unidade)'
                                 (closed)='changeAvaliavel(unidade)'>

                <div *ngIf='unidade?.unidadesTiposAvaliacoes?.length'
                     layout-align='center start' layout='column' flex style='width: 100%'>
                    <div *ngFor='let unidadeTipoAvaliacao of unidade.unidadesTiposAvaliacoes' style='width: 100%'>

                        <mat-list-item layout='column' layout-margin
                                       (click)='unidadeTipoAvaliacao.dispositivoValue = !unidadeTipoAvaliacao.dispositivoValue'
                                       [ngStyle]="{'background-color': unidadeTipoAvaliacao.dispositivoValue ? 'aliceblue' : '#fafafa' }">
                            <h3 style='margin-left: 25px!important' matLine>
                                {{unidadeTipoAvaliacao?.tipoAvaliacao?.nome}}
                            </h3>
                        </mat-list-item>

                        <mat-accordion>
                            <mat-expansion-panel [expanded]='unidadeTipoAvaliacao.dispositivoValue'
                                                 (opened)='changeUnidadeTipoAvaliacao(unidadeTipoAvaliacao)'
                                                 (closed)='changeUnidadeTipoAvaliacao(unidadeTipoAvaliacao)'>
                                <div> asdfasdf</div>
                                <div flex *ngFor='let unidadeTipoAvaliacaoDispositivo of unidadeTipoAvaliacao.unidadesTiposAvaliacoesDispositivo'>
                                    {{unidadeTipoAvaliacaoDispositivo?.dispositivo?.nome}}
                                </div>
                            </mat-expansion-panel>
                        </mat-accordion>
                    </div>
                    <!--                    <button mat-button flex-->
                    <!--                            *ngFor='let unidadeTipoAvaliacao of unidade.unidadesTiposAvaliacoes'>-->
                    <!--                        {{unidadeTipoAvaliacao?.tipoAvaliacao?.nome}}-->
                    <!--                    </button>-->

                    <!--                        <mat-checkbox class='example-margin'-->
                    <!--                                      [(ngModel)]='unidadeTipoAvaliacao.checked'-->
                    <!--                                      (ngModelChange)='changeUnidadeTipoAvaliacao(unidadeTipoAvaliacao)'-->
                    <!--                                      *ngFor="let unidadeTipoAvaliacao of unidade.unidadesTiposAvaliacoes">-->
                    <!--                            {{unidadeTipoAvaliacao?.tipoAvaliacao?.nome}}-->
                    <!--                        </mat-checkbox>-->
                </div>

            </mat-expansion-panel>
        </mat-accordion>
    </div>

</mat-nav-list>
