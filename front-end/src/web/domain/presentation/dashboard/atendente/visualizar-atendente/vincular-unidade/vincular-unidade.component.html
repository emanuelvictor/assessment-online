<mat-nav-list *ngIf='unidades?.length'>
    <div *ngFor="let unidade of unidades | filter:filter.unidade">
        <mat-list-item disableRipple layout='row' layout-margin>

            <h3 matLine>{{unidade?.nome}}</h3>
            <p matLine>
                {{unidade?.endereco?.logradouro ? unidade?.endereco?.logradouro + ', ' : ''}}
                {{unidade?.endereco?.numero ? unidade?.endereco?.numero + ', ' : ''}}
                {{unidade?.endereco?.bairro ? unidade?.endereco?.bairro + ', ' : ''}}
                {{unidade?.endereco?.cidade ? (unidade?.endereco?.cidade?.nome + ' - ' + unidade?.endereco?.cidade?.estado?.uf) : ''}}
            </p>

            <mat-slide-toggle layout-margin flex
                              [(ngModel)]='unidade.operadorValue'
                              (ngModelChange)='saveOperadorInner(unidade)'>
                Operador
            </mat-slide-toggle>
            <mat-slide-toggle layout-margin flex
                              [(ngModel)]='unidade.avaliavelValue'
                              (ngModelChange)='changeAvaliavel(unidade)'>
                Avali√°vel
            </mat-slide-toggle>

        </mat-list-item>
        <mat-accordion>
            <mat-expansion-panel [expanded]='unidade.avaliavelValue && ((unidade?.unidadesTiposAvaliacoes?.length > 1) || unidade?.unidadesTiposAvaliacoes[0]?.unidadesTiposAvaliacoesDispositivo?.length > 1)'>

                <div *ngIf='unidade?.unidadesTiposAvaliacoes?.length'
                     layout-align='center start' layout='column' flex style='width: 100%'>
                    <div *ngFor='let unidadeTipoAvaliacao of unidade.unidadesTiposAvaliacoes' style='width: 100%' layout='row'>

                        <mat-list-item disableRipple layout='column' layout-margin
                                       [ngStyle]="{'background-color': unidadeTipoAvaliacao.unidadeTipoAvaliacaoValue ? 'aliceblue' : '#fafafa' }"
                                       (click)='clickUnidadeTipoAvaliacao(unidadeTipoAvaliacao, unidade)'>
                            <h3 style='margin-left: 25px!important' matLine>
                                {{unidadeTipoAvaliacao?.tipoAvaliacao?.nome}}
                            </h3>
                        </mat-list-item>
                        <div layout='row' flex *ngIf='unidadeTipoAvaliacao?.unidadesTiposAvaliacoesDispositivo?.length > 1'
                             [ngStyle]="{'background-color': unidadeTipoAvaliacao.unidadeTipoAvaliacaoValue ? 'aliceblue' : '#fafafa' }">
                            <mat-checkbox flex layout-margin
                                          (change)='emit(changeUnidadeTipoAvaliacaoDispositivoUnidadeTipoAvaliacaoDispositivoValue(unidadeTipoAvaliacaoDispositivo, unidadeTipoAvaliacaoDispositivo.unidadeTipoAvaliacaoDispositivoValue)); verifyUnidadeTipoAvaliacao(unidadeTipoAvaliacao)'
                                          [(ngModel)]='unidadeTipoAvaliacaoDispositivo.unidadeTipoAvaliacaoDispositivoValue'
                                          *ngFor='let unidadeTipoAvaliacaoDispositivo of unidadeTipoAvaliacao.unidadesTiposAvaliacoesDispositivo'>
                                {{unidadeTipoAvaliacaoDispositivo?.dispositivo?.nome}}
                            </mat-checkbox>
                        </div>
                        <!--            <mat-accordion>-->
                        <!--              <mat-expansion-panel style='padding-left:33px !important'-->
                        <!--                                   (opened)='changeUnidadeTipoAvaliacao(unidadeTipoAvaliacao)'-->
                        <!--                                   (closed)='changeUnidadeTipoAvaliacao(unidadeTipoAvaliacao)'-->
                        <!--                                   [expanded]='unidadeTipoAvaliacao.unidadeTipoAvaliacaoValue' layout-margin>-->
                        <!--                <mat-checkbox [(ngModel)]='unidadeTipoAvaliacaoDispositivo.ativo'-->
                        <!--                              [ngModelOptions]='{standalone: true}' flex layout-margin-->
                        <!--                              *ngFor='let unidadeTipoAvaliacaoDispositivo of unidadeTipoAvaliacao.unidadesTiposAvaliacoesDispositivo'>-->
                        <!--                  {{unidadeTipoAvaliacaoDispositivo?.dispositivo?.nome}}-->
                        <!--                </mat-checkbox>-->
                        <!--              </mat-expansion-panel>-->
                        <!--            </mat-accordion>-->
                    </div>
                    <!--                    <button mat-button flex-->
                    <!--                            *ngFor='let unidadeTipoAvaliacao of unidade.unidadesTiposAvaliacoes'>-->
                    <!--                        {{unidadeTipoAvaliacao?.tipoAvaliacao?.nome}}-->
                    <!--                    </button>-->

                    <!--                        <mat-checkbox class='example-margin'-->
                    <!--                                      [(ngModel)]='unidadeTipoAvaliacao.checked'-->
                    <!--                                      (ngModelChange)='changeUnidadeTipoAvaliacao(unidadeTipoAvaliacao)'-->
                    <!--                                      *ngFor="let unidadeTipoAvaliacao of unidade.unidadesTiposAvaliacoes">-->
                    <!--                            {{unidadeTipoAvaliacao?.tipoAvaliacao?.nome}}-->
                    <!--                        </mat-checkbox>-->
                </div>

            </mat-expansion-panel>
        </mat-accordion>
    </div>

</mat-nav-list>
